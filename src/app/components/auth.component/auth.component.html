<div class="auth-page">

  <div class="auth-card">
    
    <h2>Iniciar Sesión</h2>
    <form [formGroup]="logginForm" (ngSubmit)="onLogin()">

      <!-- Email -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Email</mat-label>
        <input matInput formControlName="email" placeholder="Ingresa tu email">
        <mat-error *ngIf="logginForm.get('email')?.hasError('required')">
          El email es obligatorio
        </mat-error>
        <mat-error *ngIf="logginForm.get('email')?.hasError('email')">
          Ingresa un email válido
        </mat-error>
      </mat-form-field>

      <!-- Password -->
  <mat-form-field appearance="outline" class="full-width">
  <mat-label>Contraseña</mat-label>

  <input
    matInput
    [type]="hidePassword ? 'password' : 'text'"
    formControlName="password"
    placeholder="Ingresa tu contraseña"
  >

  <button
    mat-icon-button
    matSuffix
    type="button"
    (click)="hidePassword = !hidePassword"
    [attr.aria-label]="'Mostrar contraseña'"
  >
    <mat-icon>
      {{ hidePassword ? 'visibility' : 'visibility_off' }}
    </mat-icon>
  </button>

  <mat-error *ngIf="logginForm.get('password')?.hasError('required')">
    La contraseña es obligatoria
  </mat-error>
  <mat-error *ngIf="logginForm.get('password')?.hasError('minlength')">
    Mínimo 6 caracteres
  </mat-error>
</mat-form-field>


      <!-- Botón -->
       @if (logginForm.invalid) {
        <button mat-raised-button color="primary" class="submit-btn invalid"  [disabled]="logginForm.invalid">
            Ingresar
        </button>
       }
       @else {
        <button mat-raised-button color="primary" class="submit-btn"  [disabled]="logginForm.invalid" >
        Ingresar
      </button>
       }
    </form>

  <div *ngIf="showErrorMessage" class="error-message">
    Credenciales inválidas. Intenta de nuevo.
  </div>


  </div>
</div>
